var form = $('#new_location');

<% if @location.persisted? %>
	
	modalBackground();
	newRecord("<%= j render partial: 'locations/single', locals: { location: @location } %>", '.locations > .body');
	
<% else %>

	// Loop through the location errors
	<% if @location.errors.any? %>
		<% @location.errors.each do |input, msg| %>
			// Find the field div containing the input
			var field = form.find("<%= ".field.#{input}" %>");
			// Give the field an error class
			field.addClass('error');
			// Put the error message into the placeholder
			field.find('.error-placeholder').html("<%= msg %>");
		<% end %>
	<% end %>
	
	// Loop through the address errors
	<% if @address.errors.any? %>
		<% @address.errors.each do |input, msg| %>
			// Find the field div containing the input
			var field = form.find("<%= ".field.#{input}" %>");
			// Give the field an error class
			field.addClass('error');
			// Put the error message into the placeholder
			field.find('.error-placeholder').html("<%= msg %>");
		<% end %>
	<% end %>

<% end %>